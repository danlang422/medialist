<%# view-media.ejs %>
<!DOCTYPE html>
<html lang="en">
    <%- include('partials/header.ejs'); %>

    <main>
        <div class="item-details">
            <img src="<%= item.image_url %>" alt="<%= item.title %>" class="item-cover">
            <div class ="item-content">
                <h1><%= item.title %></h1>
                <h2>by <%= item.creator %></h2>
                <% if (item.year) { %>
                    <p class="media-year">Year: <%= item.year %></p>
                <% } %>
                <div class="review-metadata">
                    <p class="review-date">Reviewed on <%= new Date(item.created_at).toLocaleDateString() %></p>
                <% if (item.author_email) { %>
                    <p class="review-author">Review by: <%= item.author_email %></p>
                <% } %>
                </div>
                <p><%= item.review %></p>
            </div>
        </div>

        <%# Only show edit button if user is logged in AND owns this entry %>
        <% if (typeof user !== 'undefined' && item.user_id === user.id) { %>
            <div class="action-buttons">
                <a href="/media/edit/<%= item.id %>" class="btn-edit">Edit</a>
            </div>
        <% } %>

    </main>

    <%- include('partials/footer.ejs'); %>
</html>